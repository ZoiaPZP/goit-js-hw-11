{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function service(query, page = 1, perPage = 40) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '48018775-66f870a0a55ddc658d7ca6c06'; // Ваш ключ API\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    return response;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\n\n\n","export const elem = {\n  galleryDiv: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('.input'),\n  submitBtn: document.querySelector('.submit-btn'),\n};\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderMarkup(img) {\n  elem.galleryDiv.insertAdjacentHTML('beforeend', createMarkup(img));\n}\n\nexport function createMarkup(img) {\n  return img\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <div class=\"photo-card\">\n      <a href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image img\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          loading=\"lazy\"\n        />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes: ${likes}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Views: ${views}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Comments: ${comments}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads: ${downloads}</b>\n        </p>\n      </div>\n    </div>\n    `\n    )\n    .join('');\n}\n","import Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.1.0.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/common.css';\nimport './css/styles.css';\nimport { service } from './js/pixabay-api.js';\nimport { elem, renderMarkup } from './js/render-functions.js'; // Додано elem\n\nlet page = 1;\nconst perPage = 40;\n\nconst loadingSpinner = document.getElementById('loading-spinner');\n\n// Функція для показу індикатора завантаження\nconst showLoadingSpinner = () => {\n  loadingSpinner.style.display = 'block';\n};\n\n// Функція для приховання індикатора завантаження\nconst hideLoadingSpinner = () => {\n  loadingSpinner.style.display = 'none';\n};\n\nconst hideloadMoreBtn = () => (elem.loadMoreBtn.style.display = 'none');\nconst showloadMoreBtn = () => (elem.loadMoreBtn.style.display = 'block');\nhideloadMoreBtn();\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt', captionPosition: 'bottom', captionDelay: 200\n});\n\nasync function submit(evt) {\n  evt.preventDefault();\n\n  let text = elem.form.elements.searchQuery.value.trim();\n  page = 1;\n  cleanGallery();\n\n  if (text === '') {\n    hideloadMoreBtn();\n    if (Notiflix && Notiflix.Notify) {\n      Notiflix.Notify.failure(\n        \"Sorry, there are no images matching your search query. Please try again.\"\n      );\n    }\n    return;\n  }\n\n  showLoadingSpinner(); // Показуємо індикатор завантаження перед запитом\n\n  try {\n    const galleryItems = await service(text, page, perPage);\n\n    let totalPages = galleryItems.data.totalHits;\n\n    if (galleryItems.data.hits.length === 0) {\n      cleanGallery();\n      if (Notiflix && Notiflix.Notify) {\n        Notiflix.Notify.failure(\n          \"Sorry, there are no images matching your search query. Please try again.\"\n        );\n      }\n\n    } else if (totalPages >= 1 && totalPages < perPage) {\n      hideloadMoreBtn();\n      if (Notiflix && Notiflix.Notify) {\n        Notiflix.Notify.success(`Hooray! We found ${totalPages} image.`);\n      }\n      \n    } else if (totalPages > perPage) {\n      showloadMoreBtn();\n      if (Notiflix && Notiflix.Notify) {\n        Notiflix.Notify.success(`Hooray! We found ${totalPages} image.`);\n      }\n    }\n    renderMarkup(galleryItems.data.hits); \n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n    if (Notiflix && Notiflix.Notify) {\n      Notiflix.Notify.failure(\n        \"Sorry, there are no images matching your search query. Please try again.\"\n      );\n    }\n  }\n\n  hideLoadingSpinner(); // Приховуємо індикатор після отримання відповіді\n  lightbox.refresh();\n};\n\nasync function onClickBtn() {\n  page += 1;\n  let text = elem.form.elements.searchQuery.value;\n\n  try {\n    const galleryItems = await service(text, page, perPage);\n\n    let showPages = galleryItems.data.totalHits / perPage;\n\n    if (showPages <= page) {\n      hideloadMoreBtn();\n      if (Notiflix && Notiflix.Notify) {\n        Notiflix.Notify.failure(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    }\n\n    renderMarkup(galleryItems.data.hits); \n  } catch (error) {\n    if (Notiflix && Notiflix.Notify) {\n      Notiflix.Notify.failure(\n        \"Sorry, there are no images matching your search query. Please try again.\"\n      );\n    }\n  }\n  lightbox.refresh();\n};\n\nfunction cleanGallery() {\n  elem.galleryDiv.innerHTML = '';\n  page = 1;\n  hideloadMoreBtn();\n};\n\nelem.form.addEventListener('submit', submit);\nelem.loadMoreBtn.addEventListener('click', onClickBtn);\n\n"],"names":["service","query","page","perPage","BASE_URL","API_KEY","params","axios","error","elem","renderMarkup","img","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loadingSpinner","showLoadingSpinner","hideLoadingSpinner","hideloadMoreBtn","showloadMoreBtn","lightbox","SimpleLightbox","submit","evt","text","cleanGallery","Notiflix","galleryItems","totalPages","onClickBtn"],"mappings":"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"}